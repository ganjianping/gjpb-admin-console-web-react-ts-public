import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';
import { APP_CONFIG } from './config';

// English translations
const enResources = {
  common: {
    loading: 'Loading...',
    error: 'An error occurred',
    retry: 'Retry',
    cancel: 'Cancel',
    confirm: 'Confirm',
    save: 'Save',
    delete: 'Delete',
    edit: 'Edit',
    add: 'Add',
    search: 'Search',
    filter: 'Filter',
    actions: 'Actions',
    yes: 'Yes',
    no: 'No',
    goBack: 'Go Back',
    goHome: 'Go Home',
    viewAll: 'View All',
    lightMode: 'Light Mode',
    darkMode: 'Dark Mode',
    notifications: 'Notifications',
    userMenu: 'User Menu',
    collapseSidebar: 'Collapse Sidebar',
    expandSidebar: 'Expand Sidebar',
    notAvailable: 'Not Available',
    apply: 'Apply',
    today: 'Today',
    yesterday: 'Yesterday',
    last7Days: 'Last 7 Days',
    last30Days: 'Last 30 Days',
    thisMonth: 'This Month',
    lastMonth: 'Last Month',
    selectDateRange: 'Select Date Range',
    dateRange: 'Date Range',
    startDate: 'Start Date',
    endDate: 'End Date',
  },
  navigation: {
    dashboard: 'Dashboard',
    profile: 'Profile',
    settings: 'Settings',
    logout: 'Logout',
    users: 'Users',
    usersList: 'Users List',
    roles: 'Roles',
    reports: 'Reports',
    analytics: 'Analytics',
    exports: 'Exports',
    documents: 'Documents',
    notifications: 'Notifications',
    documentation: 'Documentation',
    manageUsers: 'Manage Users',
    createDocument: 'Create Document',
  },
  analytics: {
    title: 'Analytics',
    totalUsers: 'Total Users',
    totalViews: 'Total Views',
    conversionRate: 'Conversion Rate',
    timeframe: 'Timeframe',
    daily: 'Daily',
    weekly: 'Weekly',
    monthly: 'Monthly', 
    quarterly: 'Quarterly',
    yearly: 'Yearly',
    overview: 'Overview',
    users: 'Users',
    content: 'Content',
    traffic: 'Traffic Sources',
    userActivityTitle: 'User Activity',
    userGrowthTitle: 'User Growth Over Time',
    contentPerformanceTitle: 'Content Performance',
    trafficSourceTitle: 'Traffic Sources',
    activeUsers: 'Active Users',
    newUsers: 'New Users',
    views: 'Views',
    engagement: 'Engagement',
    articles: 'Articles',
    videos: 'Videos',
    podcasts: 'Podcasts',
    documents: 'Documents',
    presentations: 'Presentations',
    direct: 'Direct',
    search: 'Search',
    social: 'Social Media',
    email: 'Email',
    referral: 'Referral',
    avgSessionDuration: 'Avg. Session Duration',
    bounceRate: 'Bounce Rate',
    mostViewedContent: 'Most Viewed Content',
    avgTimeOnPage: 'Avg. Time on Page',
    topReferrer: 'Top Referrer',
    socialMediaLeader: 'Top Social Platform',
  },
  reports: {
    title: 'Reports',
    generateReport: 'Generate Report',
    scheduledReports: 'Scheduled Reports',
    reportHistory: 'Report History',
    generateNewReport: 'Generate New Report',
    generateReportDescription: 'Create a custom report with specific parameters',
    reportType: 'Report Type',
    format: 'Format',
    dateRange: 'Date Range',
    reportName: 'Report Name',
    reportNamePlaceholder: 'My Custom Report',
    generating: 'Generating...',
    generate: 'Generate Report',
    generationSuccess: 'Report generated successfully. You can download it now.',
    generationError: 'Failed to generate report. Please try again.',
    name: 'Name',
    type: 'Type',
    frequency: 'Frequency',
    lastRun: 'Last Run',
    nextRun: 'Next Run',
    generatedDate: 'Generated',
    size: 'Size',
    status: 'Status',
    searchReports: 'Search reports...',
    searchHistory: 'Search report history...',
    newSchedule: 'Schedule New Report',
  },
  documents: {
    allDocuments: 'All Documents',
    myDocuments: 'My Documents',
    pendingReview: 'Pending Review',
    archived: 'Archived',
    searchDocuments: 'Search documents...',
    createNew: 'Create New Document',
    title: 'Title',
    type: 'Type',
    status: 'Status',
    createdAt: 'Created At',
    createdBy: 'Created By',
    lastModified: 'Last Modified',
    noDocuments: 'No documents found',
    documentTypes: {
      report: 'Report',
      policy: 'Policy',
      contract: 'Contract',
      invoice: 'Invoice',
    },
    documentStatus: {
      draft: 'Draft',
      pending: 'Pending',
      published: 'Published',
      archived: 'Archived',
    },
  },
  auth: {
    unauthorized: 'You are not authorized to access this page',
    sessionExpired: 'Your session has expired, please log in again',
  },
  login: {
    title: 'Login to GJPB Admin Console',
    tabs: {
      username: 'Username',
      email: 'Email',
      mobile: 'Mobile',
    },
    form: {
      username: 'Username',
      email: 'Email',
      password: 'Password',
      countryCode: 'Code',
      mobileNumber: 'Mobile Number',
      submit: 'Login',
      forgotPassword: 'Forgot password?',
    },
    errors: {
      invalidCredentials: 'Invalid credentials',
      accountLocked: 'Account is locked',
      generalError: 'Login failed. Please try again.',
    },
    success: 'Login successful',
  },
  errors: {
    notFound: 'Page not found',
    serverError: 'Server error occurred',
    networkError: 'Network error. Please check your connection.',
    pageNotFoundMessage: 'The page you are looking for might have been removed, had its name changed, or is temporarily unavailable.',
    unauthorized: 'Unauthorized Access',
    unauthorizedTitle: 'You do not have permission to access this page',
    unauthorizedMessage: 'If you believe you should have access to this page, please contact your administrator.',
  },
  dashboard: {
    welcome: 'Welcome back',
    summary: 'Summary',
    recentActivity: 'Recent Activity',
    quickActions: 'Quick Actions',
    downloadReport: 'Download Report',
    manageSystem: 'Manage System',
  },
  profile: {
    noEmailProvided: 'No email provided',
    tabs: {
      personal: 'Personal Info',
      security: 'Security',
      activity: 'Activity',
    },
    form: {
      nickname: 'Nickname',
      email: 'Email',
      countryCode: 'Country Code',
      mobileNumber: 'Mobile Number',
      currentPassword: 'Current Password',
      newPassword: 'New Password',
      confirmPassword: 'Confirm New Password',
    },
    changePassword: 'Change Password',
    updatePassword: 'Update Password',
    updateSuccess: 'Profile updated successfully',
    updateError: 'Error updating profile',
    passwordChangeSuccess: 'Password changed successfully',
    passwordChangeError: 'Error changing password',
    loginActivity: 'Login Activity',
    lastLogin: 'Last Login',
    lastIP: 'Last IP',
    failedAttempts: 'Failed Attempts',
    accountStatus: 'Account Status',
    deviceSessions: 'Device Sessions',
    noActiveSessions: 'No active sessions found',
  },
  settings: {
    description: 'Manage your application preferences and settings',
    settingsUpdated: 'Settings updated successfully',
    settingsReset: 'Settings reset to defaults',
    themeChanged: 'Theme changed successfully',
    languageChanged: 'Language changed successfully',
    resetAll: 'Reset All Settings',
    appearance: {
      title: 'Appearance',
      theme: 'Theme',
      darkMode: 'Dark Mode',
      lightMode: 'Light Mode',
      language: 'Language',
      languageDescription: 'Select your preferred language',
      selectLanguage: 'Language',
    },
    notifications: {
      title: 'Notifications',
      pushNotifications: 'Push Notifications',
      pushDescription: 'Receive notifications within the application',
      emailNotifications: 'Email Notifications',
      emailDescription: 'Receive email notifications for important updates',
    },
    security: {
      title: 'Security',
      securityAlerts: 'Security Alerts',
      alertsDescription: 'Get notified about suspicious activities',
      cookieConsent: 'Cookie Consent',
      cookieDescription: 'Allow cookies to enhance your experience',
      autoLogout: 'Auto Logout',
      autoLogoutDescription: 'Automatically log out after period of inactivity',
    },
  },
};

// Chinese translations
const zhResources = {
  common: {
    loading: '加载中...',
    error: '发生错误',
    retry: '重试',
    cancel: '取消',
    confirm: '确认',
    save: '保存',
    delete: '删除',
    edit: '编辑',
    add: '添加',
    search: '搜索',
    filter: '筛选',
    actions: '操作',
    yes: '是',
    no: '否',
    goBack: '返回',
    goHome: '回到首页',
    viewAll: '查看全部',
    lightMode: '亮色模式',
    darkMode: '暗色模式',
    notifications: '通知',
    userMenu: '用户菜单',
    collapseSidebar: '收起侧边栏',
    expandSidebar: '展开侧边栏',
    notAvailable: '不可用',
    apply: '应用',
    today: '今天',
    yesterday: '昨天',
    last7Days: '最近7天',
    last30Days: '最近30天',
    thisMonth: '本月',
    lastMonth: '上月',
    selectDateRange: '选择日期范围',
    dateRange: '日期范围',
    startDate: '开始日期',
    endDate: '结束日期',
  },
  navigation: {
    dashboard: '仪表板',
    profile: '个人资料',
    settings: '设置',
    logout: '退出登录',
    users: '用户管理',
    usersList: '用户列表',
    roles: '角色管理',
    reports: '报表',
    analytics: '数据分析',
    exports: '数据导出',
    documents: '文档',
    notifications: '通知',
    documentation: '文档',
    manageUsers: '管理用户',
    createDocument: '创建文档',
  },
  analytics: {
    title: '数据分析',
    totalUsers: '总用户数',
    totalViews: '总浏览量',
    conversionRate: '转化率',
    timeframe: '时间范围',
    daily: '每日',
    weekly: '每周',
    monthly: '每月',
    quarterly: '每季度',
    yearly: '每年',
    overview: '概览',
    users: '用户',
    content: '内容',
    traffic: '流量来源',
    userActivityTitle: '用户活动',
    userGrowthTitle: '用户增长趋势',
    contentPerformanceTitle: '内容表现',
    trafficSourceTitle: '流量来源',
    activeUsers: '活跃用户',
    newUsers: '新用户',
    views: '浏览量',
    engagement: '参与度',
    articles: '文章',
    videos: '视频',
    podcasts: '播客',
    documents: '文档',
    presentations: '演示文稿',
    direct: '直接访问',
    search: '搜索引擎',
    social: '社交媒体',
    email: '电子邮件',
    referral: '引荐',
    avgSessionDuration: '平均会话时长',
    bounceRate: '跳出率',
    mostViewedContent: '最多查看内容',
    avgTimeOnPage: '页面平均停留时间',
    topReferrer: '主要引荐来源',
    socialMediaLeader: '主要社交平台',
  },
  reports: {
    title: '报表',
    generateReport: '生成报表',
    scheduledReports: '定时报表',
    reportHistory: '报表历史',
    generateNewReport: '生成新报表',
    generateReportDescription: '创建带有特定参数的自定义报表',
    reportType: '报表类型',
    format: '格式',
    dateRange: '日期范围',
    reportName: '报表名称',
    reportNamePlaceholder: '我的自定义报表',
    generating: '生成中...',
    generate: '生成报表',
    generationSuccess: '报表已成功生成。您现在可以下载。',
    generationError: '生成报表失败。请重试。',
    name: '名称',
    type: '类型',
    frequency: '频率',
    lastRun: '上次运行',
    nextRun: '下次运行',
    generatedDate: '生成时间',
    size: '大小',
    status: '状态',
    searchReports: '搜索报表...',
    searchHistory: '搜索报表历史...',
    newSchedule: '新建定时报表',
  },
  documents: {
    allDocuments: '所有文档',
    myDocuments: '我的文档',
    pendingReview: '待审核',
    archived: '已归档',
    searchDocuments: '搜索文档...',
    createNew: '创建新文档',
    title: '标题',
    type: '类型',
    status: '状态',
    createdAt: '创建时间',
    createdBy: '创建人',
    lastModified: '最后修改',
    noDocuments: '未找到文档',
    documentTypes: {
      report: '报告',
      policy: '政策',
      contract: '合同',
      invoice: '发票',
    },
    documentStatus: {
      draft: '草稿',
      pending: '待审核',
      published: '已发布',
      archived: '已归档',
    },
  },
  auth: {
    unauthorized: '您无权访问此页面',
    sessionExpired: '会话已过期，请重新登录',
  },
  login: {
    title: '登录 GJPB 管理控制台',
    tabs: {
      username: '用户名',
      email: '电子邮箱',
      mobile: '手机',
    },
    form: {
      username: '用户名',
      email: '电子邮箱',
      password: '密码',
      countryCode: '区号',
      mobileNumber: '手机号码',
      submit: '登录',
      forgotPassword: '忘记密码？',
    },
    errors: {
      invalidCredentials: '无效的凭据',
      accountLocked: '帐户已锁定',
      generalError: '登录失败，请重试。',
    },
    success: '登录成功',
  },
  errors: {
    notFound: '页面不存在',
    serverError: '服务器错误',
    networkError: '网络错误，请检查您的连接。',
    pageNotFoundMessage: '您要查找的页面可能已被删除、更名或暂时不可用。',
    unauthorized: '无访问权限',
    unauthorizedTitle: '您无权访问此页面',
    unauthorizedMessage: '如果您认为自己应该有权访问此页面，请联系管理员。',
  },
  dashboard: {
    welcome: '欢迎回来',
    summary: '摘要',
    recentActivity: '最近活动',
    quickActions: '快捷操作',
    downloadReport: '下载报表',
    manageSystem: '管理系统',
  },
  profile: {
    noEmailProvided: '未提供电子邮件',
    tabs: {
      personal: '个人信息',
      security: '安全',
      activity: '活动',
    },
    form: {
      nickname: '昵称',
      email: '电子邮件',
      countryCode: '国家代码',
      mobileNumber: '手机号码',
      currentPassword: '当前密码',
      newPassword: '新密码',
      confirmPassword: '确认新密码',
    },
    changePassword: '更改密码',
    updatePassword: '更新密码',
    updateSuccess: '个人资料更新成功',
    updateError: '更新个人资料时出错',
    passwordChangeSuccess: '密码更改成功',
    passwordChangeError: '更改密码时出错',
    loginActivity: '登录活动',
    lastLogin: '上次登录',
    lastIP: '最后登录IP',
    failedAttempts: '失败的尝试',
    accountStatus: '帐户状态',
    deviceSessions: '设备会话',
    noActiveSessions: '未找到活动会话',
  },
  settings: {
    description: '管理您的应用程序偏好设置和设置',
    settingsUpdated: '设置更新成功',
    settingsReset: '设置重置为默认值',
    themeChanged: '主题更改成功',
    languageChanged: '语言更改成功',
    resetAll: '重置所有设置',
    appearance: {
      title: '外观',
      theme: '主题',
      darkMode: '暗色模式',
      lightMode: '亮色模式',
      language: '语言',
      languageDescription: '选择您首选的语言',
      selectLanguage: '语言',
    },
    notifications: {
      title: '通知',
      pushNotifications: '推送通知',
      pushDescription: '在应用程序内接收通知',
      emailNotifications: '电子邮件通知',
      emailDescription: '接收重要更新的电子邮件通知',
    },
    security: {
      title: '安全',
      securityAlerts: '安全警报',
      alertsDescription: '获取可疑活动的通知',
      cookieConsent: 'Cookie 同意',
      cookieDescription: '允许使用 Cookie 以增强您的体验',
      autoLogout: '自动注销',
      autoLogoutDescription: '在一段时间不活动后自动注销',
    },
  },
};

// Initialize i18next
i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources: {
      en: enResources,
      zh: zhResources,
    },
    lng: APP_CONFIG.DEFAULT_LANGUAGE,
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false, // React already safes from XSS
    },
    detection: {
      order: ['localStorage', 'navigator'],
      caches: ['localStorage'],
      lookupLocalStorage: 'gjpb_language',
    },
    debug: import.meta.env.DEV, // Enable debug logs in development
    keySeparator: '.',
    nsSeparator: ':',
    returnEmptyString: false,
    returnNull: false,
  }).catch(err => console.error('i18n initialization error:', err));

// Check if i18n has been initialized correctly
if (!i18n.isInitialized) {
  console.warn('i18n has not been properly initialized!');
}

export default i18n;